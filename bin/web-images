#!/usr/bin/env bash

command -v convert > /dev/null 2>&1;

if [[ $? -gt 0 ]]; then
	echo 'ImageMagick is needed.'
	echo 'Run "sudo apt install imagemagick" to install it, before continuing';
	exit 1;
fi 

if [[ ! $1 ]]; then
	echo "Usage: web-images <targetWidth>";
	exit 1;
fi

for image in *; do
	full_filename=$(basename -- $image);
	filename="${full_filename%.*}";
	extension="${full_filename##*.}";
	convert $image -resize $1 -strip "${filename}-${1}.${extension}";
done;
